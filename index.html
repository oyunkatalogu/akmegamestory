<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <title>AkMegaStore</title>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
  <style>
    .game-card {
      width: 180px;
      border: 1px solid #ccc;
      border-radius: 10px;
      padding: 10px;
      margin: 10px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .catalog { display: flex; flex-wrap: wrap; justify-content: center; }
  </style>
</head>
<body>
  <div id="loginSection">
    <h2>Giriş Yap</h2>
    <input type="text" id="username" placeholder="Kullanıcı adı"><br>
    <input type="password" id="password" placeholder="Şifre"><br>
    <button onclick="login()">Giriş</button>
  </div>

  <div id="catalogSection" style="display:none;">
    <h2>Oyun Kataloğu</h2>
    <div class="catalog" id="gameCatalog"></div>
  </div>

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBb1dqb3SqYpKtEb3WNt8LSVc4t1SGETe4",
      authDomain: "akmegamestore-66522.firebaseapp.com",
      databaseURL: "https://akmegamestore-66522-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "akmegamestore-66522",
      storageBucket: "akmegamestore-66522.firebasestorage.app",
      messagingSenderId: "89303927223",
      appId: "1:89303927223:web:c1b6bc1231e191a5920032"
    };
    firebase.initializeApp(firebaseConfig);

    function login() {
      const user = document.getElementById("username").value;
      const pass = document.getElementById("password").value;
      if (user && pass) {
        localStorage.setItem("user", user);
        document.getElementById("loginSection").style.display = "none";
        document.getElementById("catalogSection").style.display = "block";
        loadGames();
      }
    }

    function loadGames() {
      firebase.database().ref("games").once("value").then(snapshot => {
        const container = document.getElementById("gameCatalog");
        container.innerHTML = '';
        snapshot.forEach(child => {
          const g = child.val();
          const div = document.createElement("div");
          div.className = "game-card";
          div.innerHTML = `
            <img src="${g.image}" style="width:100%;height:150px;object-fit:cover">
            <h3>${g.name}</h3>
            <p>${g.device} / ${g.model}</p>
            <p>${g.price} TL</p>
            <button onclick="addToCart('${g.code}')">Sepete Ekle</button>
            <button onclick="removeFromCart('${g.code}')">Sepetten Çıkar</button>
          `;
          container.appendChild(div);
        });
      });
    }

    function getCart() {
      return JSON.parse(localStorage.getItem("cart") || "[]");
    }

    function addToCart(code) {
      let cart = getCart();
      if (!cart.includes(code)) {
        cart.push(code);
        localStorage.setItem("cart", JSON.stringify(cart));
        alert("Eklendi");
      }
    }

    function removeFromCart(code) {
      let cart = getCart();
      cart = cart.filter(c => c !== code);
      localStorage.setItem("cart", JSON.stringify(cart));
      alert("Çıkarıldı");
    }
  </script>
</body>
</html>
